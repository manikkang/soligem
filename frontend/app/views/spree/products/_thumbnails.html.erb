<%# no need for thumbnails unless there is more than one image %>

<% @color_variants=@product.variants.select { |v| v.option_values.include? Spree::OptionValue.find_by_name(color.name) }%>
<ul id="product-thumbnails" class="thumbnails inline" data-hook>

<% @color_variants.each do |variant|%>

  <%variant.images.each do |image|%>
  <li class='tmb-all tmb-<%= image.viewable.id %>'>
   <%= link_to(image_tag(image.attachment.url(:mini)), image.attachment.url(:product)) 
   %>
   <%=image.alt%>
</li>
  <%end%>
  
<%end%>
</ul>
<script type="text/javascript">
  
</script>
<!-- <ul id="product-thumbnails" class="thumbnails inline" data-hook>
   <% @product.images.each do |i| %>
     <li class='tmb-all tmb-<%= i.viewable.id %>'>
       <%= link_to(image_tag(i.attachment.url(:mini)), i.attachment.url(:product)) %>
     </li>
   <% end %>
</ul> -->
